# TickerHub Changelog - v0.1.0 (Crypto MVP)

**Release Date:** 2025-12-08
**Branch:** `main` (archived as `archive/main-v1.0-crypto-mvp`)
**Status:** Crypto MVP Complete

---

## Overview

Initial release of TickerHub - a unified market intelligence platform. This version establishes the crypto MVP with Bitcoin/Ethereum blockchain explorer and CoinGecko price data integration.

---

## Features Implemented

### Frontend
- React 18 + TypeScript SPA
- "Cyber Matrix" theme (neon-cyberpunk aesthetic)
- Animated background with matrix-style effects
- Responsive dashboard with price cards
- Interactive price charts (Recharts)
- Blockchain explorer pages:
  - Block list and details
  - Transaction lookup
  - Address lookup
- TanStack Query for server state management
- Wouter for lightweight routing
- shadcn/ui component library (45+ primitives)

### Backend
- Express + TypeScript (ESM)
- Modular API architecture (domain-driven):
  - `api/crypto/` - Prices and charts
  - `api/blockchain/` - Network stats, blocks
  - `api/explorer/` - Transactions, addresses
  - `api/stats/` - Platform stats, health check
- Security middleware stack:
  - Helmet.js (CSP, XSS, clickjacking protection)
  - CORS with origin whitelist
  - Rate limiting (100 req/min per IP)
  - SSRF protection (URL allowlist)
  - Request sanitization
- In-memory caching with TTL
- Graceful degradation (mock data fallbacks)
- Structured logging

### External API Integrations
| API | Purpose | Rate Limit | Auth |
|-----|---------|------------|------|
| CoinGecko | Crypto prices, charts | Free tier | None |
| Blockchain.com | Bitcoin blocks/txs | Unlimited | None |
| Etherscan | Ethereum blocks/txs | 5/sec free | Optional |

---

## Architecture Decisions

### ADR-001: Modular API Structure
**Decision:** Domain-driven API organization
**Rationale:** Scalability for stock market expansion
**Structure:** Each domain has `routes.ts` + `service.ts`

### ADR-002: No Hard Etherscan Dependency
**Decision:** App works with mock data when API unavailable
**Rationale:** Free tier rate limits, avoid user-facing errors

### ADR-003: In-Memory Caching
**Decision:** Simple Map-based cache vs Redis
**Rationale:** Solo dev, single instance, reduce complexity
**Future:** Migrate to Redis if scaling required

### ADR-004: UI Theme Lock
**Decision:** "Cyber Matrix" theme frozen
**Rationale:** Consistent brand, only additive UI changes allowed

### ADR-005: SSRF Allowlist Pattern
**Decision:** Explicit URL allowlist for external requests
**Rationale:** OWASP A10 compliance, prevent SSRF attacks

---

## API Endpoints

```
GET /api/prices                       # Top 20 crypto prices
GET /api/chart/:coinId/:range         # Price history (1D,7D,30D,90D,1Y)
GET /api/network/:chain               # Network stats (ethereum/bitcoin)
GET /api/blocks/:chain/:limit/:page   # Paginated block list
GET /api/block/:chain/:number         # Single block details
GET /api/block/:chain/:number/transactions
GET /api/tx/:hash                     # Transaction details
GET /api/address/:address             # Address info
GET /api/address/:address/transactions
GET /api/stats                        # Platform statistics
GET /api/health                       # Health check endpoint
```

---

## Security Implementation

### Middleware Stack (Applied Order)
1. `securityHeaders` - Helmet.js configuration
2. `corsMiddleware` - Origin validation
3. `sanitizeRequest` - Input sanitization
4. `apiSecurityHeaders` - Additional API headers
5. `rateLimiter` - 100 req/min per IP
6. `validateParams` - Zod schema validation (per-route)

### SSRF Allowlist (as of v0.1.0)
```typescript
const ALLOWED_HOSTS = [
  'api.coingecko.com',
  'api.etherscan.io',
  'blockchain.info',
  'finnhub.io',        // Future: Stocks
  'api.finnhub.io',
  'api.groq.com',      // Future: AI fallback
  'generativelanguage.googleapis.com', // Future: Gemini
];
```

---

## Infrastructure

### CI/CD Pipeline
- GitHub Actions workflow
- Triggers: Push to `main`, PRs to `main`
- Jobs: Lint, TypeCheck, Build, Deploy (Coolify)
- Health check verification post-deploy

### Deployment Target
- Platform: Coolify (self-hosted)
- SSL: Let's Encrypt via Coolify
- Domain: `ticker.devprojects.cloud` (planned)

---

## Known Limitations

1. **No persistent storage** - In-memory cache only
2. **Single instance** - No horizontal scaling
3. **No authentication** - Public API
4. **No WebSocket** - Polling-based updates
5. **Bitcoin block txs** - Returns empty array (not implemented)

---

## Metrics & Logging Strategy

### Current Logging
- Structured console logging with timestamps
- Log levels: info, warn, error, debug
- Request logging: method, path, status, duration
- Error logging with stack traces (dev only)

### Planned Metrics (Future)
See `CHANGELOG/METRICS_STRATEGY.md` for full strategy.

---

## Dependencies (Key)

| Package | Version | Purpose |
|---------|---------|---------|
| express | ^4.21 | HTTP server |
| helmet | ^8.0 | Security headers |
| cors | ^2.8 | CORS handling |
| express-rate-limit | ^7.5 | Rate limiting |
| zod | ^3.24 | Validation |
| drizzle-orm | ^0.38 | ORM (PostgreSQL ready) |
| react | ^18.3 | UI framework |
| @tanstack/react-query | ^5.60 | Server state |
| recharts | ^2.15 | Charts |
| framer-motion | ^11.15 | Animations |
| tailwindcss | ^3.4 | Styling |

---

## Git History

### Branch Structure
- `main` - Production branch
- `archive/main-v1.0-crypto-mvp` - Snapshot before stock expansion
- `archive/crypto-mvp-v1` - Original first draft

### Commit Guidelines
- Conventional commits format
- No AI attribution in messages
- No emojis in commits

---

## Next Version Scope (v0.2.0)

### Phase 1: Stock Market Data Layer
1. Finnhub API integration
2. Stock-specific types in schema
3. `server/api/stocks/` module
4. Unified asset search

### Phase 2: UI Integration
1. Stocks section on Dashboard
2. StockCard component
3. Stock search in Header
4. StocksPage for detailed view

---

## Session Notes (2025-12-08)

### Decisions Made
1. Git branch reorganization completed
2. AI provider strategy: Gemini (primary) + Groq (fallback) = 45 RPM free
3. $0 cost confirmed viable for testing/MVP phase
4. SSRF allowlist updated for AI providers
5. Changelog system established

### Open Questions
- Redis migration timing
- WebSocket implementation approach
- Telegram bot architecture
